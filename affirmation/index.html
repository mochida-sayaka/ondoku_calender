<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ”® ã‚¢ãƒ•ã‚¡ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</title>
  
  <!-- CSS -->
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/screens.css">
  <link rel="stylesheet" href="css/stats.css">
  <link rel="stylesheet" href="css/animations.css">
</head>
<body>
  <div class="container">
    <!-- è¨­å®šç”»é¢ -->
    <div id="setupScreen" class="screen">
      <h1>ğŸ”® ã‚¢ãƒ•ã‚¡ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</h1>
      <p class="subtitle">ã‚ãªãŸã®å¿ƒã«éŸ¿ãè¨€è‘‰ã‚’ã€æ¯æ—¥éŸ³èª­ã—ã¾ã—ã‚‡ã†</p>
      
      <div class="setup-card">
        <div class="form-group">
          <label>ã‚ãªãŸã®åå‰</label>
          <input type="text" id="studentNameInput" placeholder="ä¾‹ï¼šç”°ä¸­å¤ªéƒ">
        </div>

        <div class="form-group">
          <label>ä»Šé€±ã®æ°—åˆ†ã¯ï¼Ÿ</label>
          <div class="mood-grid" id="moodGrid">
            <button class="mood-btn" data-mood="gentle">
              <span class="mood-icon">ğŸŒ¸</span>
              <span class="mood-label">Gentle</span>
              <span class="mood-desc">å„ªã—ã</span>
            </button>
            <button class="mood-btn" data-mood="uplifting">
              <span class="mood-icon">ğŸš€</span>
              <span class="mood-label">Uplifting</span>
              <span class="mood-desc">å‰å‘ãã«</span>
            </button>
            <button class="mood-btn" data-mood="empowering">
              <span class="mood-icon">ğŸ’ª</span>
              <span class="mood-label">Empowering</span>
              <span class="mood-desc">åŠ›å¼·ã</span>
            </button>
            <button class="mood-btn" data-mood="balanced">
              <span class="mood-icon">ğŸŒˆ</span>
              <span class="mood-label">Balanced</span>
              <span class="mood-desc">ãƒŸãƒƒã‚¯ã‚¹</span>
            </button>
          </div>
        </div>

        <div class="form-group">
          <label>é›£æ˜“åº¦</label>
          <div class="level-grid" id="levelGrid">
            <button class="level-btn" data-level="easy">
              <span>åˆç´š</span>
              <small>è‹±æ¤œ5ç´š/4ç´š</small>
            </button>
            <button class="level-btn" data-level="intermediate">
              <span>ä¸­ç´š</span>
              <small>è‹±æ¤œ3ç´š</small>
            </button>
            <button class="level-btn" data-level="advanced">
              <span>ä¸Šç´š</span>
              <small>è‹±æ¤œæº–2ç´š/2ç´š</small>
            </button>
          </div>
          <p class="hint-text">ğŸ’¡ é¸æŠã—ãŸãƒ ãƒ¼ãƒ‰ã®æ–‡ãŒè¶³ã‚Šãªã„å ´åˆã¯ã€åŒã˜ãƒ¬ãƒ™ãƒ«å†…ã®ä»–ã®ãƒ ãƒ¼ãƒ‰ã‚‚å«ã¾ã‚Œã¾ã™</p>
        </div>

        <div class="form-group">
          <label>1æ—¥ä½•æ–‡ï¼Ÿ</label>
          <div class="count-grid" id="countGrid">
            <button class="count-btn" data-count="1">1æ–‡</button>
            <button class="count-btn" data-count="2">2æ–‡</button>
            <button class="count-btn" data-count="3">3æ–‡</button>
          </div>
        </div>

        <button class="primary-btn" id="drawCardsBtn">
          ğŸ”® ä»Šé€±ã®ã‚«ãƒ¼ãƒ‰ã‚’å¼•ã
        </button>
      </div>
    </div>

    <!-- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç”»é¢ -->
    <div id="calendarScreen" class="screen" style="display: none;">
      <div class="header">
        <h2 id="weekRange"></h2>
        <div style="display: flex; gap: 0.5rem;">
          <button class="secondary-btn" id="statsBtn">ğŸ“Š çµ±è¨ˆ</button>
          <button class="secondary-btn" id="settingsBtn">âš™ï¸ è¨­å®šã‚’å¤‰æ›´</button>
        </div>
      </div>
      <div class="calendar-container" id="calendar"></div>
    </div>

    <!-- ã‚¢ãƒ•ã‚¡ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”»é¢ -->
    <div id="affirmationScreen" class="screen" style="display: none;">
      <div class="header">
        <button class="secondary-btn" id="backBtn">â† æˆ»ã‚‹</button>
        <h2 id="affirmationDate"></h2>
        <div style="width: 80px;"></div>
      </div>
      
      <div class="affirmation-container">
        <div class="affirmation-card">
          <div class="affirmation-text" id="affirmationText"></div>
          <div class="affirmation-japanese" id="affirmationJapanese" style="display: none;"></div>
          <button class="toggle-btn" id="toggleJapanese">æ—¥æœ¬èªã‚’è¡¨ç¤º</button>
        </div>

        <div class="audio-controls">
          <button class="audio-btn" id="playModelBtn">
            <span class="btn-icon">ğŸ”Š</span>
            <span>ãŠæ‰‹æœ¬ã‚’èã</span>
          </button>
          <button class="audio-btn" id="recordBtn">
            <span class="btn-icon">ğŸ¤</span>
            <span>éŒ²éŸ³ã™ã‚‹</span>
          </button>
        </div>

        <div id="recordingPlayer" style="display: none;">
          <audio id="recordingAudio" controls></audio>
        </div>

        <div class="pagination" id="pagination"></div>

        <button class="primary-btn" id="completeBtn" style="display: none;">
          âœ¨ å®Œäº†ã—ã¦é€ä¿¡
        </button>
      </div>
    </div>

    <!-- çµ±è¨ˆç”»é¢ -->
    <div id="statsScreen" class="screen" style="display: none;">
      <div class="header">
        <button class="secondary-btn" id="backToCalendarBtn">â† ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«æˆ»ã‚‹</button>
        <h2>ğŸ“Š å­¦ç¿’çµ±è¨ˆ</h2>
        <div style="width: 120px;"></div>
      </div>
      
      <div class="calendar-container" id="statsContainer">
        <!-- çµ±è¨ˆã‚«ãƒ¼ãƒ‰ã¯JSã§å‹•çš„ç”Ÿæˆ -->
      </div>
    </div>
  </div>

  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getFirestore } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
    import { getStorage } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js';
    
    // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«Firebaseã‚’å…¬é–‹
    window.initializeApp = initializeApp;
    window.getFirestore = getFirestore;
    window.getStorage = getStorage;
  </script>

  <!-- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³JSï¼ˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é †ã«èª­ã¿è¾¼ã¿ï¼‰ -->
  <script src="js/firebase-config.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/firebase-service.js"></script>
  <script src="js/stats.js"></script>
  <script src="js/calendar.js"></script>
  <script src="js/affirmation.js"></script>
  <script src="js/main.js"></script>
</body>
</html>